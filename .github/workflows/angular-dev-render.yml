name: Angular Dev CI/CD (Render Deploy)


on:
push:
branches: [ main ]
workflow_dispatch: {}


jobs:
angular-dev-ci:
name: Validate Angular Dev Build
runs-on: ubuntu-latest


steps:
- name: Checkout Code
uses: actions/checkout@v4


- name: Setup Node 18
uses: actions/setup-node@v4
with:
node-version: "18"


- name: Install Dependencies
working-directory: ./frontend
run: npm ci


- name: Optional Build Test
working-directory: ./frontend
run: |
npm run build -- --watch=false || true
# In dev mode, we do not block deployment â€” so "true" keeps job non-fatal


trigger-render-deploy:
name: Trigger Render Deploy (Angular Dev)
needs: [ angular-dev-ci ]
runs-on: ubuntu-latest


steps:
- name: Trigger Render Deployment
run: |
echo "Triggering Render deploy for Angular development service"
curl -X POST "https://api.render.com/v1/services/${{ secrets.RENDER_ANGULAR_SERVICE_ID }}/deploys" \
-H "Authorization: Bearer ${{ secrets.RENDER_API_KEY }}" \
-H "Content-Type: application/json" \
-d '{}'


- name: Finished
run: echo "Angular development service deployment triggered on Render."